# CH 10. 상태 패턴

## 발표 정리
### 진규님: 웹 애플리케이션에서 상태를 계속 갖고 있지 않을거 같은데 웹 애플리케이션에서 상태 패턴을 사용할 일이 있을까?

- 찬미님: AR쪽에서 많이 사용한다고 본거 같다. 상태 패턴 아이디어가 상태 머신 아이디어에서 왔고, AI 캐릭터의 상태에 따라 상태를 다르게 할 때 사용된다.
- 예성님: 한 요청을 했을 때 단계적인 워크플로우가 있을 때 사용되는 것을 본 적이 있다. 예를 들어 하나의 요청에 따라 ABC 프로세스를 거친다 했을 때 각각을 수행했을 때 갖는 상태에 따라 다른 동작을 수행해야 할 때 사용됐다.
- 진규님: 분기가 많아지면 고려해볼 수 있겠다.

### 혁님: 전략패턴과 상태패턴의 차이가 client가 구성 객체를 바꾸는지 아닌지로 나뉘는거로 이해했는데 보통은 전략패턴은 많이 사용하지 않을까요?

- 예성님: 각각의 처리 단계에서 상태의 성공 여부에 따라 행위가 달라져야 하는데 그것을 상태에 위임하고 각각의 noti를 그곳에 정의할 경우가 있다. 클라이언트는 상태 변경 유무를 몰라도 상태들이 컨텍스트의 상태를 바꾸며 행동을 바꾸는 것. 한 요청에 여러 상태를 가질 때 상태 변화에 따라 동작을 수행할 때 사용할 수 있을거 같다.

### 찬미님: 무한 상태 머신 말고 유한 상태 머신으로도 상태 관리를 하는거 같은데 상태를 트리 구조로 관리하는게 어떤 의미인가요?

- 게임 개발할 때 상태를 트리 구조로 개발했다. 예전에 aws 알렉사를 사용할 때 상태를 저장해야 할 일이 었었다. 어떤 말을 할 때 컨텍스트를 갖고 있는데 분기에 따라 다른 상태를 갖는데 그 때 상태를 적용하기 위해 트리 구조를 적용했다.

찬미님: 상태패턴을 적용할지 여부를 알아보려면 FSM을 그려보면 좋을거 같다. FSM은 상태가 있고, 이벤트가 일어났을 때 다음 상태가 어떻게 되는지를 표시한 것이다. 

진규님: 중복을 제거하는게 항상 옳지는 않을 것이다. 만약 새로 만드는것과 기존 중복 코드에 손을 대는 두 가지 경우가 있다면 무엇이 좋을지 고민한 적이 있는데 멘토님 말씀으로는 새롭게 만드는 방향이 더 좋다고 했다. 기존 중복 코드를 고치면 에러 확률이 올라간다.

### 결론

**상태 패턴은 if문 줄이는게 가장 큰 장점일거 같다.**
