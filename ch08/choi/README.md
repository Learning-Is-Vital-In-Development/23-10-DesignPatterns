---
marp: true
---

# 템플릿 메서드 패턴

## 최 혁

---

# 템플릿 메서드 패턴

    부모 클래스에 알고리즘의 골격을 정의하고, 알고리즘의 일부 단계를 자식 클래스에서 구현할 수 있으며,
    알고리즘의 특정 단계를 서브클래스에서 재정의하는 패턴

```java
abstract class AbstractClass {
    final void templateMethod() {
        primitiveOperation1();
        primitiveOperation2();
        concreteOperation();
    }

    abstract void primitiveOperation1();

    abstract void primitiveOperation2();

    void concreteOperation() { 알고리즘 구현 }
}
```

---

# 후크

- **추상 클래스에서 선언되지만 기본적인 내용만 구현되어 있거나 아무 코드도 들어 있지 않은 메서드**
- **다양한 위치에서 알고리즘에 끼어들 수 있다.**

```java
abstract class AbstractClass {
    final void templateMethod() {
        // 다양한 알고리즘 메서드들
        if (hook()) {
            // 더 실행할 알고리즘들
        }
    }

    boolean hook() {}
}
```

---

# 할리우드 원칙

    먼저 연락하지 마세요. 저희가 연락 드리겠습니다.

**저수준 구성 요소가 시스템에 접속할 수는 있지만 언제, 어떻게 그 구성 요소를 사용할지는 고수준 구성 요소가 결정한다.**

- 템플릿 메서드 패턴에서는?
  - abstract class는 고수준 구성 요소로 알고리즘 구조를 결정
  - sub class는 저수준 구성 요소로 알고리즘 구현을 제공하는 용도로만 사용되고, 고수준 구성 요소에게 호출 당하기 전까지는 추상 클래스를 직접 호출하지 않음
  - 저수준 구성 요소가 고수준 구성 요소에 있는 메서드를 호출할 수 있지만, 순환 의존성이 생기지 않도록 해야 한다.

---

# 자바 Array.sort도 템플릿 메서드 패턴이다!

- Array는 정렬용 템플릿 메서드에서 알고리즘을 제공하지만, 객체 비교 방법은 Comparable 인터페이스의 compareTo 메서드를 구현해야 한다
- 얼핏 보면 서브클래스를 만들지 않았기에 템플릿 메서드 패턴이 아닌 것처럼 보이지만, 알고리즘의 어떤 단계를 구현하는 방법을 위임했다는 측면에서 템플릿 메서드 패턴이라 할 수 있다
- 얼핏 보면 템플릿 메서드 패턴보다는 전략 패턴처럼 보일 수 있어도, 알고리즘 전체를 위임받는 것이 아닌, 특정 단게의 알고리즘만 제공받기에 템플릿 메서드 패턴이라 할 수 있다.

---

# 여러 알고리즘과 비교

**전략 패턴**: 바꿔 쓸 수 있는 행동을 캡슐화하고, 어떤 행동을 사용할지는 서브클래스에 맡긴다.(전체 알고리즘을 위임)

**템플릿 메서드 패턴**: 알고리즘의 어떤 단계를 구현하는 방법을 서브클래스에서 결정한다.(일부 알고리즘을 위임)

**팩토리 메서드 패턴**: 구상 클래스의 인스턴스 생성을 서브클래스에서 결정한다.

---

# 정리

- 템플릿 메서드는 알고리즘의 단계를 정의하며 일부 단계를 서브클래스에서 구현하도록 할 수 있다.
- 템플릿 메서드 패턴은 코드 재사용에 큰 도움이 된다.
- 탬플릿 메서드가 들어있는 추상 클래스는 구상 메서드, 추상 메서드, 후크를 정의할 수 있다.
- 할리우드 원칙에 의하면 저수준 모듈을 언제 어떻게 호출할지는 고수준 모듈에서 결정하는 것이 좋다.
