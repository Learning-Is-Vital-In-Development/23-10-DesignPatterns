# CH 09. 반복자 패턴과 컴포지트 패턴

# 반복자 패턴

### 예성님: 무조건 반복자 패턴을 적용하는게 좋을까요?

상황에 따라 반복자 패턴을 적용하는게 다를 수 있을거 같다. 만약 Collection을 공통화하면 되지 않나? 다양한 Collection을 사용할 케이스에만 반복자 패턴을 적용하고 이외의 상황에서는 안 써도 되지 않나?

찬미님: 순회하며 비즈니스 로직을 처리할 때 무조건 Iterator를 사용해야만 접근 가능하면 커스텀이 쉽지 않을 수 있을거 같다. 오히려 제한을 두는 느낌이다.

### 혁님: 단일 책임 원칙에서 책임의 바운더리를 정하는 기준이 무엇일까요?

어렵다..

예성님: 어떤분은 컨트롤러 요청별로 다른 파일에 작성하기도 한다. 이것이 단일 책임 원칙을 지켜야 하기 때문인가? 결국 사람마다 어느 부분까지 단일 책임인지도 잘 모르겠다. 여기서 책임은 시스템의 요구사항을 보았을 때 서로 다른 자료구조를 사용하는데 순회를 하는 비즈니스 로직의 책임은 

---

# 컴포지트 패턴

### 찬미님: 컴포지트 패턴이 낯설게 느껴졌다. 예시가 있을까요?

예성님: 계층구조를 추상화할 때 사용하는걸로 알고 있지만, 백엔드 단에서는 별로 없다. 다만 클라이언트 단에서는 많이 사용하는데 유니티에서 계층 구조를 갖고 있는 코드에서 많이 사용한다.

찬미님: 너무 복잡하다. 직관적으로 떠올리기 쉽지 않다. 트리 구조를 컴포지트 패턴을 활용하는 경우는 잘 모르겠지만 백엔드에서 트리 구조에 대한 활용이 많이 되는데 대표적으로 mysql index를 b트리 자료구조로 정의되어 있다.

예성님: 컴포지트 패턴을 조직도에 비유하여 설명하면 팀장과 사원을 하나의 컴포넌트로 퉁치고 일을 시키면 팀장이 사원에게 일을 위임하여 일을 수행하고 결과물을 팀장이 받아 최종 결과물을 제공하는 형태이다. 

### 예성님: 405p에서 컴포지트 패턴은 단일 역할 원칙을 깨는 대신 투명성을 확보하는 패턴이라고 하는데 여기서 투명성이 무엇인가요?

결론: 컴포지트 패턴은 복합 객체와 단일 객체가 수행할 동작을 전부 추상화하여 제공하기에 단일 역할 원칙을 깨지만, 클라이언트 입장에서 전부 하나의 인터페이스만 바라보고 같은 객체로 취급할 수 있기에 복잡성을 숨기고 간단하게 보일 수 있다는 측면에서의 투명성을 말한 것이라 생각한다.
