---
marp: true
---

# 전략 패턴

---

# 일반적인 기능 구현

일반적으로 객체에 기능을 추가시킬 땐 해당 객체가 구현해야 하는 추상 메서드를 추가해 해당 기능을 객체에서 구현하도록 한다.

```java
@FunctionalInterface
public interface Callable<V> {

    V call() throws Exception;
}

private static final class RunnableAdapter<T> implements Callable<T> {
    ...
        public T call() {
            task.run();
            return result;
        }
    }
    ...
```

---

# 전략 패턴에서의 기능 구현

하지만 전략 패턴에서는 기능을 인터페이스로 정의하고 구현한다. 그리고 기능 인터페이스를 객체에 클래스 변수로 추가한 뒤 기능을 동작할 때 기능 인터페이스의 구현체를통해 해당 기능을 사용한다.

```java
예제
https://refactoring.guru/ko/design-patterns/strategy/java/example
```

---

# 전략 패턴(Strategy Pattern)

알고리즘군을 정의하고 캡슐화해서 각각의 알고리즘군을 수정해서 쓸 수 있게 해주며 클라이언트(호출자)로부터 독립적으로 변경할 수 있다.

## 적용 시점

객체 내에서 한 알고리즘의 다양한 변형들을 사용하고 싶을 때, 그리고 런타임 중에 한 알고리즘에서 다른 알고리즘으로 전환하고 싶을 때 사용한다.

클래스의 비즈니스 로직을 해당 로직의 콘텍스트에서 그리 중요하지 않을지도 모르는 알고리즘들의 구현 세부 사항들로부터 고립시키고 싶을 때 사용한다.(캡슐화)

같은 알고리즘의 다른 변형들 사이를 전환하는 거대한 조건문이 당신의 클래스에 있는 경우에 사용한다.

---

# 디자인 원칙 1

`애플리케이션에서 달라지는 부분을 찾아내고 달라지지 않는 부분과 분리한다.`

해당 패턴을 통해 기능은 캡슐화되고 다른 부분과 분리되어 객체와 별개로 동작한다.

---

# 디자인 원칙 2

`구현보다는 인터페이스에 맞춰서 프로그래밍한다.`

해당 패턴에서 여러 기능을 동적으로 수행하기 위해(유연성) 기능 인터페이스(추상 클래스)를 변수로 정의하고 구현 클래스를 할당해 기능을 동작한다.

---

# 디자인 원칙 3

`상속보다는 구성을 활용한다.`
해당 패턴에서는 구성을 활용해 유연성을 향상시킨다. 알고리즘군을 별도의 클래스 집합으로 캡슐화할 수 있으며 실행 시에 동작을 수정할 수도 있게 된다.

## 구성이란?

- `A는 B이다.` 관계에서는 객체가 부모 클래스에서 상속 받아 기능을 구현하거나 기능 인터페이스를 직접 구현해 기능을 구현한다.
- `A에는 B가 있다.` 관계에서는 객체 내부에 기능 인터페이스를 변수로 선언해서 객체의 해당 기능 호출시 기능 인터페이스 구현체에 해당 기능을 위임하는 것이다.
- 구성은 두 클래스를 `A에는 B가 있다.` 관계로 만드는 것을 뜻한다.

---

# 느낀점

처음에 책을 읽으면서 기능을 추가할 때 당연히 ~able 형태의 인터페이스를 구현하게 작성하면 되겠지라고 생각했었다. 객체의 기능을 구현할 땐 객체에 기능을 추가하는게 당연하다고 생각했기 때문이었다. 하지만 책에서 "이건 지금까지 나왔던 아이디어 중에서 제일 바보 같은 아이디어군요"라고 했을 때 적지 않은 충격을 받았다. 별로 중요하지 않게 생각하던 디자인 패턴에 대해 다시 생각하게 되는 순간이었다.

중간에 전략 패턴에 관한 예제 코드들을 보면서 함수형 인터페이스 코드와 유사하다는 느낌을 받았다. 둘 모두 기능을 클래스로 정의해서 클래스의 메서드를 실행하게 하는게 비슷한 것 같다.

패턴을 익히는 것도 중요하지만 디자인 원칙들을 통해 배우는 것이 더 많다고 느꼈다. 패턴을 잘 알지 못하더라도 디자인 원칙들을 지킨다면 좀 더 유연하고 효율적인 코드를 짤 수 있기 때문이다. 기본적인 원칙을 지키면서 패턴을 익히려 노력해야겠다.

---

# 참조
전략 패턴 설명: https://refactoring.guru/ko/design-patterns/strategy
전략 패턴 예제: https://refactoring.guru/ko/design-patterns/strategy/java/example
